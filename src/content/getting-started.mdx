# Getting Started with Peanut Butter AND JAM

This guide is based on the [Peanut Butter AND JAM](https://github.com/Esscrypt/pbnj) (PBJ) implementation of the JAM protocol. Read the [Gray Paper](https://graypaper.com/) for the authoritative specification.

---

## Quick Start

### Prerequisites

1. **Install Dependencies**:

   ```bash
   bun install
   ```

2. **Initialize Submodules**:

   ```bash
   git submodule init
   git submodule update
   ```

3. **Verify Gray Paper Access**:

   ```bash
   ls submodules/graypaper/text/safrole.tex  # Should exist
   ls submodules/jamtestvectors/stf/safrole/ # Should exist
   ```

---

## Running the Node

```bash
bun run ./infra/node/services/main-service.ts --validator-index 0 --telemetry 127.0.0.1:9000 --chain config/spec-tiny.json
```

## Running with RPC Server

```bash
bun run ./apis/rpc-server/src/index.ts --validator-index 0 --telemetry 127.0.0.1:9000 --chain config/spec-tiny.json | bunx pino-pretty
```

## Running Polkajam

```bash
# if not there already
cd submodules/polkajam

./polkajam --chain dev run --telemetry tart-backend:9000 --dev-validator 0 --temp
```

---

## Development Workflow

1. **Read the Gray Paper**: Always consult the relevant Gray Paper sections before implementing.
2. **Use Test Vectors**: Validate your implementation against official test vectors.
3. **Follow Implementation Guide**: See the JAM Implementation Guide in the repo.
4. **Adhere to Rules**: Follow Gray Paper Adherence Rules.

---

## Key Resources

### Test Vectors

| Component       | Directory                    | Description        |
| --------------- | ---------------------------- | ------------------ |
| **Safrole**     | `jamtestvectors/stf/safrole/` | Consensus tests  |
| **PVM**         | `jamtestvectors/stf/pvm/`     | Virtual machine tests |
| **Erasure Coding** | `jamtestvectors/erasure/`  | Data availability tests |
| **Codec**       | `jamtestvectors/codec/`       | Serialization tests |

---

## Bandersnatch VRF README

The [Bandersnatch VRF](https://github.com/Esscrypt/bandersnatch-vrf) package provides Verifiable Random Functions (VRFs) over the Bandersnatch curve: IETF VRF (RFC-9381-style), Pedersen VRF, and Ring VRF (including a WASM-backed variant), plus hash-to-curve and CLI tooling.

- **README**: [https://github.com/Esscrypt/bandersnatch-vrf](https://github.com/Esscrypt/bandersnatch-vrf)

---

## Bandersnatch VRF documentation

- **Repository & docs**: [https://github.com/Esscrypt/bandersnatch-vrf](https://github.com/Esscrypt/bandersnatch-vrf)
- **npm**: [@pbnjam/bandersnatch-vrf](https://www.npmjs.com/package/@pbnjam/bandersnatch-vrf)

API documentation (TypeDoc) can be generated from the package:

```bash
cd packages/bandersnatch-vrf
bun run docs
```

Output is written to the `docs/` directory in the package.

---

## Getting Help

- **Gray Paper**: [https://graypaper.com/](https://graypaper.com/)
- **Community Docs**: [https://docs.jamcha.in/](https://docs.jamcha.in/)
- **Test Vectors**: `jamtestvectors/` submodule in the PBJ repo

---

## Remember

- **The Gray Paper is authoritative** — When in doubt, consult the Gray Paper.
- **Test vectors are correct** — Fix implementation, not tests.
- **Documentation is required** — Always reference Gray Paper sections.
- **Performance matters** — But not at the expense of correctness.
